define(["jquery"],function(a){return{init:function(b,c){function d(b,c){var d=parseInt(b.getElementsByClassName("easy_nb")[0].innerText),e=parseInt(b.getElementsByClassName("better_nb")[0].innerText),f=parseInt(b.getElementsByClassName("hard_nb")[0].innerText),g="";d&&(g+="E"),e&&(g+="B"),f&&(g+="H"),a("#module-"+c+" .group_img").attr("src","../blocks/like/img/group_"+g+".png")}function e(a){var b,c=!1;return s.forEach(function(d){parseInt(d.cmid)===a&&(b=d,c=!0)}),c||(b={cmid:a.toString(),type:"1",total:"0",typeone:"0",typetwo:"0",typethree:"0",uservote:"0"}),b}function f(b){a(this).css({cursor:"pointer"}),a(this).animate({top:-1.5,left:-3,height:23},100),a(this).clearQueue(),z[b.data.moduleId]=setTimeout(function(){0===parseInt(b.data.module.getElementsByClassName("easy_nb")[0].innerText)&&a("#module-"+b.data.moduleId+" .easy").attr("src","../blocks/like/img/easy_BW.png"),0===parseInt(b.data.module.getElementsByClassName("better_nb")[0].innerText)&&a("#module-"+b.data.moduleId+" .better").attr("src","../blocks/like/img/better_BW.png"),0===parseInt(b.data.module.getElementsByClassName("hard_nb")[0].innerText)&&a("#module-"+b.data.moduleId+" .hard").attr("src","../blocks/like/img/hard_BW.png"),a("#module-"+b.data.moduleId+" .group_img").animate({top:13,left:20,height:0},300).hide(0),a("#module-"+b.data.moduleId+" .group_nb").delay(50).hide(300),a("#module-"+b.data.moduleId+" .easy").delay(50).animate({top:-15,left:-20,height:20},300).css({"pointer-events":"auto"}),a("#module-"+b.data.moduleId+" .easy_nb").delay(50).show(300),a("#module-"+b.data.moduleId+" .better").delay(200).animate({top:-15,left:25,height:20},300).css({"pointer-events":"auto"}),a("#module-"+b.data.moduleId+" .better_nb").delay(200).show(300),a("#module-"+b.data.moduleId+" .hard").delay(400).animate({top:-15,left:70,height:20},300).css({"pointer-events":"auto"}),a("#module-"+b.data.moduleId+" .hard_nb").delay(400).show(300)},500),clearTimeout(y[b.data.moduleId]),y[b.data.moduleId]=setTimeout(function(){v[b.data.moduleId]||(a("#module-"+b.data.moduleId+" .hard").css({"pointer-events":"none"}).delay(50).animate({top:-7.5,left:80,height:0},500),a("#module-"+b.data.moduleId+" .hard_nb").delay(50).hide(300),a("#module-"+b.data.moduleId+" .better").css({"pointer-events":"none"}).delay(300).animate({top:-7.5,left:35,height:0},500),a("#module-"+b.data.moduleId+" .better_nb").delay(300).hide(300),a("#module-"+b.data.moduleId+" .easy").css({"pointer-events":"none"}).delay(600).animate({top:-7.5,left:-10,height:0},500),a("#module-"+b.data.moduleId+" .easy_nb").delay(600).hide(300),d(b.data.module,b.data.moduleId),a("#module-"+b.data.moduleId+" .group_img").show(0).delay(500).animate({top:0,left:0,height:20},300),a("#module-"+b.data.moduleId+" .group_nb").delay(600).show(300))},2e3)}function g(b){clearTimeout(z[b.data.moduleId]),"0px"===a("#module-"+b.data.moduleId+" .easy").css("height")&&(a(this).animate({top:0,left:0,height:20},100),a(this).clearQueue())}function h(b){var c=b.data.module.getElementsByClassName("easy_txt")[0].innerText,d=c.length;a("#module-"+b.data.moduleId+" .tooltip .tooltiptext").css({width:7*d+"px",left:"15px"}),a(this).css({cursor:"pointer"}),a(this).animate({top:-25,left:-30,height:40},100)}function i(){a(this).animate({top:-15,left:-20,height:20},100),a(this).clearQueue()}function j(b){var c=parseInt(b.data.module.getElementsByClassName("easy_nb")[0].innerText);switch(x[b.data.moduleId]=parseInt(b.data.module.getElementsByClassName("group_nb")[0].innerText),0===c&&a("#module-"+b.data.moduleId+" .easy").attr("src","../blocks/like/img/easy.png"),w[b.data.moduleId]){case u.EASY:a.ajax({type:"POST",url:"../blocks/like/update_db.php",dataType:"json",data:{func:"remove",userid:t,cmid:b.data.moduleId,type:1,vote:u.EASY},success:function(a){console.log(a)}}),c-=1,b.data.module.getElementsByClassName("easy_nb")[0].innerText=c,a("#module-"+b.data.moduleId+" .easy_nb").css({"font-weight":"normal",color:"black"}),0===c&&a("#module-"+b.data.moduleId+" .easy").attr("src","../blocks/like/img/easy_BW.png"),b.data.module.getElementsByClassName("group_nb")[0].innerText=x[b.data.moduleId]-1,w[b.data.moduleId]=u.NULL;break;case u.BETTER:console.log("YES"),a.ajax({type:"POST",url:"../blocks/like/update_db.php",dataType:"json",data:{func:"update",userid:t,cmid:b.data.moduleId,type:1,vote:u.EASY},success:function(a){console.log(a)}}),b.data.module.getElementsByClassName("easy_nb")[0].innerText=c+1,a("#module-"+b.data.moduleId+" .easy_nb").css({"font-weight":"bold",color:"#5585B6"});var d=parseInt(b.data.module.getElementsByClassName("better_nb")[0].innerText)-1;b.data.module.getElementsByClassName("better_nb")[0].innerText=d,a("#module-"+b.data.moduleId+" .better_nb").css({"font-weight":"normal",color:"black"}),0===d&&a("#module-"+b.data.moduleId+" .better").attr("src","../blocks/like/img/better_BW.png"),w[b.data.moduleId]=u.EASY;break;case u.HARD:a.ajax({type:"POST",url:"../blocks/like/update_db.php",dataType:"json",data:{func:"update",userid:t,cmid:b.data.moduleId,type:1,vote:u.EASY},success:function(a){console.log(a)}}),b.data.module.getElementsByClassName("easy_nb")[0].innerText=c+1,a("#module-"+b.data.moduleId+" .easy_nb").css({"font-weight":"bold",color:"#5585B6"});var e=parseInt(b.data.module.getElementsByClassName("hard_nb")[0].innerText)-1;b.data.module.getElementsByClassName("hard_nb")[0].innerText=e,a("#module-"+b.data.moduleId+" .hard_nb").css({"font-weight":"normal",color:"black"}),0===e&&a("#module-"+b.data.moduleId+" .hard").attr("src","../blocks/like/img/hard_BW.png"),w[b.data.moduleId]=u.EASY;break;case u.NULL:a.ajax({type:"POST",url:"../blocks/like/update_db.php",dataType:"json",data:{func:"insert",userid:t,cmid:b.data.moduleId,type:1,vote:u.EASY},success:function(a){console.log(a)}}),b.data.module.getElementsByClassName("easy_nb")[0].innerText=c+1,a("#module-"+b.data.moduleId+" .easy_nb").css({"font-weight":"bold",color:"#5585B6"}),b.data.module.getElementsByClassName("group_nb")[0].innerText=x[b.data.moduleId]+1,w[b.data.moduleId]=u.EASY}}function k(b){var c=document.getElementById("module-"+b.data.moduleId).getElementsByClassName("better_txt")[0].innerText,d=c.length;a("#module-"+b.data.moduleId+" .tooltip .tooltiptext").css({width:7*d+"px",left:"40px"}),a(this).css({cursor:"pointer"}),a(this).animate({top:-25,left:15,height:40},100)}function l(){a(this).animate({top:-15,left:25,height:20},100),a(this).clearQueue()}function m(b){var c=parseInt(b.data.module.getElementsByClassName("better_nb")[0].innerText);switch(x[b.data.moduleId]=parseInt(b.data.module.getElementsByClassName("group_nb")[0].innerText),0===c&&a("#module-"+b.data.moduleId+" .better").attr("src","../blocks/like/img/better.png"),w[b.data.moduleId]){case u.BETTER:a.ajax({type:"POST",url:"../blocks/like/update_db.php",dataType:"json",data:{func:"remove",userid:t,cmid:b.data.moduleId,type:1,vote:u.BETTER},success:function(a){console.log(a)}}),c-=1,b.data.module.getElementsByClassName("better_nb")[0].innerText=c,a("#module-"+b.data.moduleId+" .better_nb").css({"font-weight":"normal",color:"black"}),0===c&&a("#module-"+b.data.moduleId+" .better").attr("src","../blocks/like/img/better_BW.png"),b.data.module.getElementsByClassName("group_nb")[0].innerText=x[b.data.moduleId]-1,w[b.data.moduleId]=u.NULL;break;case u.EASY:a.ajax({type:"POST",url:"../blocks/like/update_db.php",dataType:"json",data:{func:"update",userid:t,cmid:b.data.moduleId,type:1,vote:u.BETTER},success:function(a){console.log(a)}}),b.data.module.getElementsByClassName("better_nb")[0].innerText=c+1,a("#module-"+b.data.moduleId+" .better_nb").css({"font-weight":"bold",color:"#5585B6"});var d=parseInt(b.data.module.getElementsByClassName("easy_nb")[0].innerText)-1;b.data.module.getElementsByClassName("easy_nb")[0].innerText=d,a("#module-"+b.data.moduleId+" .easy_nb").css({"font-weight":"normal",color:"black"}),0===d&&a("#module-"+b.data.moduleId+" .easy").attr("src","../blocks/like/img/easy_BW.png"),w[b.data.moduleId]=u.BETTER;break;case u.HARD:a.ajax({type:"POST",url:"../blocks/like/update_db.php",dataType:"json",data:{func:"update",userid:t,cmid:b.data.moduleId,type:1,vote:u.BETTER},success:function(a){console.log(a)}}),b.data.module.getElementsByClassName("better_nb")[0].innerText=c+1,a("#module-"+b.data.moduleId+" .better_nb").css({"font-weight":"bold",color:"#5585B6"});var e=parseInt(b.data.module.getElementsByClassName("hard_nb")[0].innerText)-1;b.data.module.getElementsByClassName("hard_nb")[0].innerText=e,a("#module-"+b.data.moduleId+" .hard_nb").css({"font-weight":"normal",color:"black"}),0===e&&a("#module-"+b.data.moduleId+" .hard").attr("src","../blocks/like/img/hard_BW.png"),w[b.data.moduleId]=u.BETTER;break;case u.NULL:a.ajax({type:"POST",url:"../blocks/like/update_db.php",dataType:"json",data:{func:"insert",userid:t,cmid:b.data.moduleId,type:1,vote:u.BETTER},success:function(a){console.log(a)}}),b.data.module.getElementsByClassName("better_nb")[0].innerText=c+1,a("#module-"+b.data.moduleId+" .better_nb").css({"font-weight":"bold",color:"#5585B6"}),b.data.module.getElementsByClassName("group_nb")[0].innerText=x[b.data.moduleId]+1,w[b.data.moduleId]=u.BETTER}}function n(b){var c=b.data.module.getElementsByClassName("hard_txt")[0].innerText,d=c.length;a("#module-"+b.data.moduleId+" .tooltip .tooltiptext").css({width:7*d+"px",left:"105px"}),a(this).css({cursor:"pointer"}),a(this).animate({top:-25,left:60,height:40},100)}function o(){a(this).animate({top:-15,left:70,height:20},100),a(this).clearQueue()}function p(b){var c=parseInt(b.data.module.getElementsByClassName("hard_nb")[0].innerText);switch(x[b.data.moduleId]=parseInt(b.data.module.getElementsByClassName("group_nb")[0].innerText),0===c&&a("#module-"+b.data.moduleId+" .hard").attr("src","../blocks/like/img/hard.png"),w[b.data.moduleId]){case u.HARD:a.ajax({type:"POST",url:"../blocks/like/update_db.php",dataType:"json",data:{func:"remove",userid:t,cmid:b.data.moduleId,type:1,vote:u.HARD},success:function(a){console.log(a)}}),c-=1,b.data.module.getElementsByClassName("hard_nb")[0].innerText=c,a("#module-"+b.data.moduleId+" .hard_nb").css({"font-weight":"normal",color:"black"}),0===c&&a("#module-"+b.data.moduleId+" .hard").attr("src","../blocks/like/img/hard_BW.png"),b.data.module.getElementsByClassName("group_nb")[0].innerText=x[b.data.moduleId]-1,w[b.data.moduleId]=u.NULL;break;case u.EASY:a.ajax({type:"POST",url:"../blocks/like/update_db.php",dataType:"json",data:{func:"update",userid:t,cmid:b.data.moduleId,type:1,vote:u.HARD},success:function(a){console.log(a)}}),b.data.module.getElementsByClassName("hard_nb")[0].innerText=c+1,a("#module-"+b.data.moduleId+" .hard_nb").css({"font-weight":"bold",color:"#5585B6"});var d=parseInt(b.data.module.getElementsByClassName("easy_nb")[0].innerText)-1;b.data.module.getElementsByClassName("easy_nb")[0].innerText=d,a("#module-"+b.data.moduleId+" .easy_nb").css({"font-weight":"normal",color:"black"}),0===d&&a("#module-"+b.data.moduleId+" .easy").attr("src","../blocks/like/img/easy_BW.png"),w[b.data.moduleId]=u.HARD;break;case u.BETTER:a.ajax({type:"POST",url:"../blocks/like/update_db.php",dataType:"json",data:{func:"update",userid:t,cmid:b.data.moduleId,type:1,vote:u.HARD},success:function(a){console.log(a)}}),b.data.module.getElementsByClassName("hard_nb")[0].innerText=c+1,a("#module-"+b.data.moduleId+" .hard_nb").css({"font-weight":"bold",color:"#5585B6"});var e=parseInt(b.data.module.getElementsByClassName("better_nb")[0].innerText)-1;b.data.module.getElementsByClassName("better_nb")[0].innerText=e,a("#module-"+b.data.moduleId+" .better_nb").css({"font-weight":"normal",color:"black"}),0===e&&a("#module-"+b.data.moduleId+" .better").attr("src","../blocks/like/img/better_BW.png"),w[b.data.moduleId]=u.HARD;break;case u.NULL:a.ajax({type:"POST",url:"../blocks/like/update_db.php",dataType:"json",data:{func:"insert",userid:t,cmid:b.data.moduleId,type:1,vote:u.HARD},success:function(a){console.log(a)}}),b.data.module.getElementsByClassName("hard_nb")[0].innerText=c+1,a("#module-"+b.data.moduleId+" .hard_nb").css({"font-weight":"bold",color:"#5585B6"}),b.data.module.getElementsByClassName("group_nb")[0].innerText=x[b.data.moduleId]+1,w[b.data.moduleId]=u.HARD}}function q(a){v[a.data.moduleId]=!0}function r(b){v[b.data.moduleId]=!1,clearTimeout(y[b.data.moduleId]),y[b.data.moduleId]=setTimeout(function(){v[b.data.moduleId]||(a("#module-"+b.data.moduleId+" .hard").css({"pointer-events":"none"}).delay(50).animate({top:-7.5,left:80,height:0},500),a("#module-"+b.data.moduleId+" .hard_nb").delay(50).hide(300),a("#module-"+b.data.moduleId+" .better").css({"pointer-events":"none"}).delay(300).animate({top:-7.5,left:35,height:0},500),a("#module-"+b.data.moduleId+" .better_nb").delay(300).hide(300),a("#module-"+b.data.moduleId+" .easy").css({"pointer-events":"none"}).delay(600).animate({top:-7.5,left:-10,height:0},500),a("#module-"+b.data.moduleId+" .easy_nb").delay(600).hide(300),d(b.data.module,b.data.moduleId),a("#module-"+b.data.moduleId+" .group_img").show(0).delay(500).animate({top:0,left:0,height:20},300),a("#module-"+b.data.moduleId+" .group_nb").delay(600).show(300))},1e3)}for(var s=b,t=c,u={NULL:0,EASY:1,BETTER:2,HARD:3},v={},w={},x={},y={},z={},A=19;A<=22;A++)v[A]=!1,w[A]=null,x[A]=null,y[A]=null,z[A]=null;a(function(){for(var b=19;b<=22;b++){var c=e(b);console.log(b+" : "+JSON.stringify(c));var s='<div class="reactions"><!-- EASY ! --><span class="tooltip"><img src="../blocks/like/img/easy.png" alt=" " class="easy"/><span class="tooltiptext easy_txt">Fastoche !</span></span><span class="easy_nb">'+c.typeone+'</span><!-- I\'M GETTING BETTER --><span class="tooltip"><img src="../blocks/like/img/better.png" alt=" " class="better"/><span class="tooltiptext better_txt">Je m\'améliore !</span></span><span class="better_nb">'+c.typetwo+'</span><!-- SO HARD... --><span class="tooltip"><img src="../blocks/like/img/hard.png" alt=" " class="hard"/><span class="tooltiptext hard_txt">Dur dur...</span></span><span class="hard_nb">'+c.typethree+'</span></div><!-- GROUP --><div class="group"><img src="" alt=" " class="group_img"/><span class="group_nb">'+c.total+"</span></div>";switch(a("#module-"+b+" .activityinstance").append(s),parseInt(c.uservote)){case 1:w[b]=u.EASY,a("#module-"+b+" .easy_nb").css({"font-weight":"bold",color:"#5585B6"});break;case 2:w[b]=u.BETTER,a("#module-"+b+" .better_nb").css({"font-weight":"bold",color:"#5585B6"});break;case 3:w[b]=u.HARD,a("#module-"+b+" .hard_nb").css({"font-weight":"bold",color:"#5585B6"});break;default:w[b]=u.NULL}var t=document.getElementById("module-"+b);d(t,b),a("#module-"+b+" .group_img").mouseover({module:t,moduleId:b},f).mouseout({moduleId:b},g),a("#module-"+b+" .easy").mouseover({module:t,moduleId:b},h).mouseout({moduleId:b},i).click({module:t,moduleId:b},j),a("#module-"+b+" .better").mouseover({module:t,moduleId:b},k).mouseout({moduleId:b},l).click({module:t,moduleId:b},m),a("#module-"+b+" .hard").mouseover({module:t,moduleId:b},n).mouseout(o).click({module:t,moduleId:b},p),a("#module-"+b+" .reactions").mouseover({moduleId:b},q).mouseout({module:t,moduleId:b},r)}})}}});